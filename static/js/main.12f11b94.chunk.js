(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(16),r=n.n(a),l=(n(24),n.p,n(25),n(3)),i=n.n(l),o=n(19),d=n(7),u=n(2),j=n(11),m=n(8),x=n(17),b=n.n(x),f=n(0);function p(e){var t,n,c,s,a;return Object(f.jsxs)("article",{className:"overflow-hidden rounded-lg shadow-lg",children:[Object(f.jsx)("img",{alt:"Placeholder",className:"object-fill h-64 w-full",src:"https://image.tmdb.org/t/p/w185/".concat(e.details.poster_path)}),Object(f.jsxs)("header",{className:"flex justify-between leading-tight p-1 md:p-2",children:[Object(f.jsx)("h1",{className:"text-lg",children:Object(f.jsx)("p",{className:"text-sm",children:e.details.title})}),Object(f.jsx)("p",{className:"flex items-center justify-center text-white text-xs bg-green-500 rounded-full h-6 w-6",children:e.details.vote_average})]}),Object(f.jsx)("footer",{className:"flex flex-wrap p-1 md:p-2",children:null===(t=e.details)||void 0===t||null===(n=t.credits)||void 0===n||null===(c=n.cast)||void 0===c||null===(s=c.sort((function(e,t){return t.popularity-e.popularity})))||void 0===s||null===(a=s.slice(0,2))||void 0===a?void 0:a.map((function(e,t){return Object(f.jsxs)("p",{className:"flex items-center p-1",children:[Object(f.jsx)("img",{alt:"Placeholder",className:"block rounded-full h-8 w-8 object-cover",src:"https://image.tmdb.org/t/p/w185/".concat(e.profile_path)}),Object(f.jsx)("p",{className:"ml-2 text-xs",children:e.name})]},t)}))})]})}n(43),n(44);function v(e){var t,n={dots:!1,infinite:!1,speed:500,slidesToShow:4,slidesToScroll:1,beforeChange:function(t,n){return e.onChange({current:t,next:n})}};return Object(f.jsx)(b.a,Object(u.a)(Object(u.a)({},n),{},{children:null===(t=e.movies)||void 0===t?void 0:t.map((function(t,n){return Object(f.jsx)("div",{className:"my-1 px-1 w-full md:w-1/2 lg:my-4 lg:px-4 lg:w-1/5",onClick:function(n){return e.onClick(t)},children:Object(f.jsx)(p,{details:t})},n)}))}))}var h=n(18),g=n.n(h);function O(e){var t,n,c,s,a,r,l,i,o=null===(t=e.details)||void 0===t||null===(n=t.credits)||void 0===n||null===(c=n.crew)||void 0===c?void 0:c.filter((function(e){return"Director"===e.job})),d=e.details.vote_average/10*5,u=function(){window.history.pushState(null,"","/"),e.setShowModal(!1)};return Object(f.jsx)(f.Fragment,{children:e.showModal?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",onClick:u,children:Object(f.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-4xl",children:Object(f.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(f.jsx)("div",{className:"relative p-6 flex-auto",children:Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("div",{className:"flex-none w-64 h-96 relative",children:Object(f.jsx)("img",{src:"https://image.tmdb.org/t/p/w185/".concat(e.details.poster_path),alt:"",className:"absolute inset-0 w-full h-full object-cover"})}),Object(f.jsxs)("form",{className:"flex-auto pl-6",children:[Object(f.jsxs)("div",{className:"flex flex-wrap pb-2",children:[Object(f.jsx)("h1",{className:"flex-auto text-xl font-semibold",children:e.details.title}),Object(f.jsx)("div",{className:"text-xl font-semibold text-gray-500",children:Object(f.jsx)(g.a,{rating:d,starDimension:"30px",starSpacing:"5px",starRatedColor:"#FF9529",numberOfStars:5,name:"rating"})})]}),Object(f.jsxs)("div",{className:"flex flex-wrap border-b border-solid border-gray-300",children:[Object(f.jsxs)("p",{className:"flex items-center p-1 text-sm text-gray-500",children:[e.details.release_date.split("-")[0]," | ",e.details.runtime," min |"]}),null===o||void 0===o?void 0:o.map((function(e,t){return Object(f.jsxs)("p",{className:"flex items-center p-1",children:[Object(f.jsx)("img",{alt:"profile",className:"block rounded-full h-8 w-8 object-cover",src:"https://image.tmdb.org/t/p/w185/".concat(e.profile_path)}),Object(f.jsx)("span",{className:"ml-2 text-xs",children:e.name})]},t)}))]}),Object(f.jsx)("div",{className:"flex flex-wrap pt-2",children:Object(f.jsx)("p",{className:"text-sm text-gray-500 text-justify",children:e.details.overview})}),Object(f.jsxs)("div",{className:"flex flex-wrap pt-2 items-center",children:[Object(f.jsx)("p",{className:"w-full py-2 font-semibold",children:"Cast"}),null===(s=e.details)||void 0===s||null===(a=s.credits)||void 0===a||null===(r=a.cast)||void 0===r||null===(l=r.sort((function(e,t){return t.popularity-e.popularity})))||void 0===l||null===(i=l.slice(0,2))||void 0===i?void 0:i.map((function(e,t){return Object(f.jsxs)("p",{className:"flex items-center p-1",children:[Object(f.jsx)("img",{alt:"profile",className:"block rounded-full h-8 w-8 object-cover",src:"https://image.tmdb.org/t/p/w185/".concat(e.profile_path)}),Object(f.jsx)("p",{className:"ml-2 text-xs",children:e.name})]},t)}))]})]})]})}),Object(f.jsx)("div",{className:"flex items-center justify-end p-2 border-t border-solid border-gray-300 rounded-b",children:Object(f.jsx)("button",{className:"text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1",type:"button",style:{transition:"all .15s ease"},onClick:u,children:"Close"})})]})})}),Object(f.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}):null})}n(50);function w(e){var t=function(e){var t="https://api.themoviedb.org/3",n=function(n){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.api_key=e,fetch("".concat(t,"/").concat(n,"?").concat(new URLSearchParams(c))).then((function(e){return e.json()}))};return{discoverMovies:function(e){return n("discover/movie",e)},getGenres:function(){return n("genre/movie/list")},getCredits:function(e){return n("movie/".concat(e,"/credits"))},getMovieDetails:function(e){return n("/movie/".concat(e))}}}("2f7ae9a74799d3d34722ebd4a473c5da"),n=Object(c.useState)([]),s=Object(m.a)(n,2),a=s[0],r=s[1],l=Object(c.useState)({}),x=Object(m.a)(l,2),b=x[0],p=x[1],h=Object(c.useState)(!1),g=Object(m.a)(h,2),w=g[0],N=g[1],y=Object(c.useState)({}),S=Object(m.a)(y,2),k=S[0],_=S[1],C=function(){var e=Object(j.a)(i.a.mark((function e(n){var c,s,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.allSettled([t.getCredits(n.id),t.getMovieDetails(n.id)]);case 3:c=e.sent,s=c[0].value,a=c[1].value,_(Object(u.a)(Object(u.a)(Object(u.a)({},n),a),{},{credits:s})),window.history.pushState(null,"","?movieId=".concat(n.id)),N(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){Object(j.a)(i.a.mark((function e(){var n,c,s,a,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getGenres();case 3:return n=e.sent.genres,c=n.map((function(e){return p((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(d.a)({},e.name,1))})),t.discoverMovies({language:"en-US",sort_by:"popularity.desc",include_adult:!1,include_video:!1,with_genres:e.id,page:1}).then((function(t){return{genre:e,movies:t.results}}))})),e.next=7,Promise.allSettled(c);case 7:s=e.sent,r(s.map((function(e){return e.value}))),a=new URLSearchParams(window.location.search),(l=a.get("movieId"))&&C({id:l}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))()}),[]),Object(f.jsxs)(f.Fragment,{children:[a.map((function(e,n){return Object(f.jsxs)("div",{className:"container my-12 mx-auto px-4 md:px-12",children:[Object(f.jsx)("p",{className:"font-bold text-lg",children:e.genre.name}),Object(f.jsx)("div",{className:"-mx-1 lg:-mx-4",children:Object(f.jsx)(v,{movies:e.movies,onClick:C,onChange:function(c){return s=Object(u.a)(Object(u.a)({},c),{},{genre:e.genre,index:n}),void Object(j.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a[s.index].movies.length-s.next<10)){e.next=7;break}return e.next=3,t.discoverMovies({language:"en-US",sort_by:"popularity.desc",include_adult:!1,include_video:!1,with_genres:s.genre.id,page:b[s.genre.name]+1}).then((function(e){return e.results}));case 3:n=e.sent,p((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(d.a)({},s.genre.name,e[s.genre.name]+1))})),a[s.index].movies=a[s.index].movies.concat(n),r(Object(o.a)(a));case 7:case"end":return e.stop()}}),e)})))();var s}},n)})]},n)})),Object(f.jsx)(O,{showModal:w,details:k,setShowModal:N})]})}var N=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(w,{})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(N,{})}),document.getElementById("root")),y()}},[[51,1,2]]]);
//# sourceMappingURL=main.12f11b94.chunk.js.map